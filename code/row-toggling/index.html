<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Alternating Rows Demo</title>

    <style type="text/css">
        body {
            background:#bbb;
            font-family:Helvetica, Arial, sans-serif;
        }

        table {
            border:solid 3px #000;
            margin:15px;
            width:250px;
        }

        tr {
            background:#fff;
        }

        td {
            padding:6px;
        }

        /* Apply the "normal-form" CSS rule to tables that don't have the toggling. PS - These class names aren't that great, you should probably change those too. :P */
        table.normal-form > tbody > tr:nth-child(odd), tr.alternate {
            background:pink;
        }

        thead {
            font-size:1.4em;
            font-weight:bold;
            text-align:center;
        }

        /* By default, we want our hideable rows to be hidden. */
        .hideable {
            display:none;
        }
    </style>    

    <!-- The following line just loads jQuery from a CDN so this demo works on your machine -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
        // I'm creating a namespace here. It is good JavaScript practice to use a namespace to avoid polluting the global namespace and potentially conflicting with stuff. Plus, namespaces give a little structure to your code. :)
        if (typeof cw == "undefined") {
            var cw = {};
        }

        cw.forms = {};

        // Here is a reusable initialize function. This could be used after the form is loaded or even after an update panel is triggered. This function adds alternating row colors to all "hideable-forms" and wires up all of the toggle buttons.
        cw.forms.initialize = function() {
            // Apply the alternating rows.
            $(".hideable-form").each(function() {
                cw.forms.applyAlternatingRows($(this));
            });

            // Get all of the toggle-buttons and wire them up to the tables they affect. The tables they affect is determined by the "data-target" attribute which contains their target table's id.
            $(".toggle-button").on("click", cw.forms.handleToggleClick);
        };

        // Toggle all of the advanced fields that are associated to the button.
        cw.forms.handleToggleClick = function() {
            var button = $(this),
                target = $("#" + button.data("target"));

            cw.forms.toggleAdvancedFields(target);
        };

        // Now I'm making a resusable function. This could be called from anywhere. Modify this to meet your needs! :)
        cw.forms.toggleAdvancedFields = function(target) {
            target.find("> tbody > tr.hideable").toggle();
            cw.forms.applyAlternatingRows(target);
        };

        // Here's a function that applies the alternating row colors to our advanced, hideable tables.
        cw.forms.applyAlternatingRows = function(target) {
            var i = 1;

            target.find("> tbody > tr").each(function() {
                var row = $(this);

                if (!row.is(":hidden")) {
                    if (i % 2 === 0)
                        row.removeClass("alternate");
                    else
                        row.addClass("alternate");
                    i++;
                }
                else
                    row.removeClass("alternate");
            });
        };

        // Run the initialize function when the page is ready.
        $(cw.forms.initialize);
    </script>
</head>
<body>
    <button class="toggle-button" data-target="some-cool-advanced-table">Toggle First Advanced Table</button>
    <button class="toggle-button" data-target="another-table">Toggle Second Table</button>
    <table class="normal-form" cellspacing="0">
        <thead>
            <tr>
                <td>This is a normal table</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Row 1</td>
            </tr>
            <tr>
                <td>Row 2</td>
            </tr>
            <tr>
                <td>Row 3</td>
            </tr>
            <tr>
                <td>Row 4</td>
            </tr>
            <tr>
                <td>Row 5</td>
            </tr>
        </tbody>
    </table>
    <table id="some-cool-advanced-table" class="hideable-form" cellspacing="0">
        <thead>
            <tr>
                <td>Advanced Table #1</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Row 1</td>
            </tr>
            <tr>
                <td>Row 2</td>
            </tr>
            <tr>
                <td>Row 3</td>
            </tr>
            <tr class="hideable">
                <td>Advanced Row 4</td>
            </tr>
            <tr>
                <td>Row 5</td>
            </tr>
            <tr class="hideable">
                <td>Advanced Row 6</td>
            </tr>
            <tr>
                <td>Row 7</td>
            </tr>
        </tbody>
    </table>
    <table id="another-table" class="hideable-form" cellspacing="0">
        <thead>
            <tr>
                <td>Advanced Table #2</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Row 1</td>
            </tr>
            <tr>
                <td>Row 2</td>
            </tr>
            <tr>
                <td>Row 3</td>
            </tr>
            <tr class="hideable">
                <td>Advanced Row 4</td>
            </tr>
            <tr>
                <td>Row 5</td>
            </tr>
            <tr class="hideable">
                <td>Advanced Row 6</td>
            </tr>
            <tr>
                <td>Row 7</td>
            </tr>
        </tbody>
    </table>
</body>
</html>
